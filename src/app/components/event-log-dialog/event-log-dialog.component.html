<h2 mat-dialog-title>Event-Log Input</h2>
<mat-dialog-content class="mat-typography">
    <form (ngSubmit)="onOkClick()">
        <mat-form-field
            style="width: 100%"
            hintLabel="Activities per trace concatenated by exactly one whitespace.
                The traces concatenated by a plus (+). The whitespaces before
                and after the plus are optional. Empty input and the input of multiplicity-patterns like '3*A' or 'B*4' aren't allowed."
        >
            <mat-label>Enter Event-Log here!</mat-label>
            <textarea
                matInput
                cdkTextareaAutosize
                cdkAutosizeMinRows="4"
                cdkAutosizeMaxRows="15"
                placeholder="A B C + testAktivitaet1+testAktivitaet2 (activity) + Aktivitaet3 Z (P) L ..."
                [formControl]="eventLogControl"
                cdkFocusInitial
                (keydown)="onKeyDown($event)"
                #textarea
            ></textarea>
            <mat-error
                *ngIf="
                    eventLogControl.hasError('required') &&
                    eventLogControl.dirty
                "
            >
                There is no empty input allowed!
            </mat-error>
            <mat-error *ngIf="eventLogControl.hasError('multiplicityRegEx')">
                The Input of multiplicity-patterns through a "*" is not
                possible.
            </mat-error>
            <mat-error *ngIf="eventLogControl.hasError('invalidInput')">
                Invalid Input! Reason: A plus at the beginning or the end of the
                string, too many whitespaces in a row between activities or too
                many plus signs.
            </mat-error>
            <pre>{{ eventLogControl.hasError("invalidInput") | json }}</pre>
            <pre>{{
                eventLogControl.hasError("multiplicityRegEx") | json
            }}</pre>
        </mat-form-field>
        <mat-dialog-actions align="end">
            <input
                type="file"
                class="file-input"
                (change)="onFileSelected($event)"
                accept=".xes"
                #fileUpload
            />
            <div class="file-upload-wrapper">
                <div class="file-upload">
                    <button
                        mat-mini-fab
                        color="primary"
                        class="upload-btn"
                        (click)="fileUpload.click()"
                        type="button"
                    >
                        <mat-icon>attach_file</mat-icon>
                    </button>
                    <div class="filename">
                        {{ fileName || "Upload XES-File to import Event Log" }}
                    </div>
                </div>
            </div>
            <button
                mat-fab
                extended
                mat-dialog-close
                color=""
                matTooltip="Close Dialog"
            >
                Cancel
            </button>
            <button
                mat-fab
                extended
                matTooltip="Clear the text input"
                [disabled]="eventLogControl.value === ''"
                (click)="clearTextarea(textarea)"
                color="accent"
            >
                Clear
            </button>
            <button
                mat-fab
                extended
                matTooltip="You can also press Ctrl + Enter to submit."
                type="submit"
                [disabled]="eventLogControl.invalid"
                color="primary"
            >
                Ok
            </button>
        </mat-dialog-actions>
    </form>
</mat-dialog-content>
